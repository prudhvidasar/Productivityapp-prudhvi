<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prudhvi's Productivity App</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #e0eafc, #cfdef3);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      background: linear-gradient(90deg, #6200ea, #8e2de2);
      color: #fff;
      padding: 20px;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      width: 100%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    #subGreeting {
      color: #e1bee7;
      font-size: 1.3rem;
      font-weight: 600;
      margin-top: 8px;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .nav-buttons {
      margin: 20px 0;
      width: 90%;
      max-width: 600px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }

    .nav-buttons button {
      padding: 12px 20px;
      background: linear-gradient(45deg, #6200ea, #7b1fa2);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      flex-grow: 1;
      margin: 5px;
      transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }

    .nav-buttons button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
      background: linear-gradient(45deg, #7b1fa2, #6200ea);
    }

    .nav-buttons button::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 0.3s;
    }

    .nav-buttons button:hover::after {
      left: 100%;
    }

    .container {
      width: 90%;
      max-width: 600px;
      margin-bottom: 50px;
    }

    .section {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 25px;
      padding: 25px;
      display: none;
      animation: fadeIn 0.5s ease-in-out;
    }

    .section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      margin-top: 0;
      color: #333;
      font-size: 1.5rem;
      font-weight: 600;
    }

    input[type="text"], select {
      width: 60%;
      padding: 12px;
      margin-right: 10px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1rem;
      background: #f9f9f9;
      transition: border-color 0.3s, box-shadow 0.3s;
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    input[type="text"]:focus, select:focus {
      outline: none;
      border-color: #6200ea;
      box-shadow: 0 0 8px rgba(98, 0, 234, 0.3);
      background: #fff;
    }

    button.add-btn {
      padding: 12px 20px;
      background: linear-gradient(45deg, #03dac5, #26a69a);
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
      position: relative;
      overflow: hidden;
    }

    button.add-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
      background: linear-gradient(45deg, #26a69a, #03dac5);
    }

    button.add-btn::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 0.3s;
    }

    button.add-btn:hover::after {
      left: 100%;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      border-bottom: 1px solid #eee;
      transition: background 0.2s;
    }

    li:last-child {
      border-bottom: none;
    }

    li:hover {
      background: #f5f5f5;
    }

    li button.complete-btn {
      background: linear-gradient(45deg, #6200ea, #7b1fa2);
      color: white;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }

    li button.complete-btn:disabled {
      background: linear-gradient(45deg, #9e9e9e, #757575);
      cursor: default;
      box-shadow: none;
    }

    li button.complete-btn:hover:not(:disabled) {
      transform: scale(1.1);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      background: linear-gradient(45deg, #7b1fa2, #6200ea);
    }

    #usernamePrompt {
      text-align: center;
      margin-top: 50px;
    }

    #usernamePrompt input {
      width: 60%;
      padding: 12px;
      margin-bottom: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 1rem;
      background: #f9f9f9;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    #usernamePrompt input:focus {
      outline: none;
      border-color: #6200ea;
      box-shadow: 0 0 8px rgba(98, 0, 234, 0.3);
    }

    #usernamePrompt button {
      padding: 12px 30px;
      background: linear-gradient(45deg, #6200ea, #7b1fa2);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    #usernamePrompt button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.25);
    }

    #profileSection {
      padding: 20px;
    }

    .profile-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .profile-avatar {
      width: 60px;
      height: 60px;
      background: #6200ea;
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      margin-right: 15px;
    }

    .profile-info {
      flex-grow: 1;
    }

    .profile-info p {
      margin: 5px 0;
      font-size: 1.1rem;
    }

    .profile-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin-bottom: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
    }

    .stat-item {
      text-align: center;
      font-size: 0.9rem;
    }

    .stat-item strong {
      display: block;
      font-size: 1.2rem;
      color: #6200ea;
    }

    .activity-controls {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .activity-controls button {
      padding: 8px 15px;
      background: linear-gradient(45deg, #6200ea, #7b1fa2);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: transform 0.2s, box-shadow 0.2s;
      margin: 5px;
    }

    .activity-controls button.active {
      background: linear-gradient(45deg, #bb86fc, #6200ea);
    }

    .activity-controls button:hover:not(.active) {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    #profileActivity li {
      font-size: 0.9rem;
      color: #444;
      padding: 10px;
      border-bottom: 1px solid #eee;
    }

    #profileActivity li:last-child {
      border-bottom: none;
    }
  </style>
</head>
<body>
  <header>
    <div id="mainGreeting">Prudhvi says Hi! 👋✨</div>
    <div id="subGreeting"></div>
  </header>

  <div id="usernamePrompt">
    <input type="text" id="usernameInput" placeholder="Enter your name" />
    <button onclick="saveUsername()">Start</button>
  </div>

  <div class="nav-buttons" style="display:none;" id="navButtons">
    <button onclick="switchSection('taskSection')">Tasks</button>
    <button onclick="switchSection('habitSection')">Habits</button>
    <button onclick="switchSection('reflectionSection')">Reflection</button>
    <button onclick="switchSection('profileSection')">Profile</button>
  </div>

  <div class="container" style="display:none;" id="mainApp">
    <div id="taskSection" class="section active">
      <h2>To-do Tasks</h2>
      <div style="display: flex; align-items: center; margin-bottom: 10px;">
        <input type="text" id="taskInput" placeholder="Add task" />
        <select id="taskCategory">
          <option value="Personal">Personal</option>
          <option value="Work">Work</option>
          <option value="Other">Other</option>
        </select>
        <button class="add-btn" onclick="addTask()">Add</button>
      </div>
      <ul id="taskList"></ul>
    </div>

    <div id="habitSection" class="section">
      <h2>Habits</h2>
      <div style="display: flex; align-items: center; margin-bottom: 10px;">
        <input type="text" id="habitInput" placeholder="New Habit" />
        <button class="add-btn" onclick="addHabit()">Add</button>
      </div>
      <ul id="habitList"></ul>
    </div>

    <div id="reflectionSection" class="section">
      <h2>Reflection</h2>
      <div style="display: flex; align-items: center; margin-bottom: 10px;">
        <input type="text" id="reflectionInput" placeholder="What's on your mind?" />
        <button class="add-btn" onclick="addReflection()">Add</button>
        <button class="add-btn" onclick="exportReflections()">Export</button>
      </div>
      <ul id="reflectionList"></ul>
    </div>

    <div id="profileSection" class="section">
      <h2>Profile</h2>
      <div class="profile-header">
        <div class="profile-avatar" id="profileAvatar"></div>
        <div class="profile-info">
          <p><strong>User:</strong> <span id="profileName"></span></p>
        </div>
      </div>
      <div class="profile-stats">
        <div class="stat-item">
          <strong id="taskCount">0</strong> Tasks Completed
        </div>
        <div class="stat-item">
          <strong id="habitCount">0</strong> Habits Tracked
        </div>
        <div class="stat-item">
          <strong id="reflectionCount">0</strong> Reflections
        </div>
      </div>
      <div class="activity-controls">
        <button onclick="filterActivity('all')" class="active">All</button>
        <button onclick="filterActivity('task')">Tasks</button>
        <button onclick="filterActivity('habit')">Habits</button>
        <button onclick="filterActivity('reflection')">Reflections</button>
        <button onclick="clearActivity()">Clear</button>
      </div>
      <h3>Activity</h3>
      <ul id="profileActivity"></ul>
      <button class="add-btn" onclick="goBack()">Back</button>
    </div>
  </div>

  <script>
    let username = '';
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    let habits = JSON.parse(localStorage.getItem('habits')) || [];
    let reflections = JSON.parse(localStorage.getItem('reflections')) || [];
    let activities = JSON.parse(localStorage.getItem('activities')) || [];
    let stats = JSON.parse(localStorage.getItem('stats')) || {
      taskCount: 0,
      habitCount: 0,
      reflectionCount: 0
    };
    let currentFilter = 'all';

    function saveUsername() {
      const input = document.getElementById('usernameInput');
      if (input.value.trim() !== '') {
        username = input.value.trim();
        document.getElementById('profileName').textContent = username;
        document.getElementById('profileAvatar').textContent = username.charAt(0).toUpperCase();
        document.getElementById('usernamePrompt').style.display = 'none';
        document.getElementById('mainApp').style.display = 'block';
        document.getElementById('navButtons').style.display = 'flex';
        updateGreeting();
        loadData();
      } else {
        alert('Please enter your name.');
      }
    }

    function updateGreeting() {
      const mainGreeting = document.getElementById('mainGreeting');
      const name = username.toLowerCase();
      if (name === 'rachana') {
        mainGreeting.textContent = 'Hi my love 😘 I\'m Prudhvi';
      } else if (name === 'ramya' || name === 'kavya') {
        mainGreeting.textContent = 'Hi Akka 🥰 I\'m Prudhvi';
      } else if (name === 'shreedhar' || name === 'madhu') {
        mainGreeting.textContent = 'Hi Annaya 🥰 I\'m Prudhvi';
      } else {
        mainGreeting.textContent = 'Prudhvi says Hi! 👋✨';
      }
      updateGreetingTime();
    }

    function updateGreetingTime() {
      const nowUTC = new Date();
      const nowIST = new Date(nowUTC.getTime() + (5.5 * 60 * 60 * 1000));
      const hour = nowIST.getUTCHours();
      let greeting = 'Good morning';

      if (hour >= 0 && hour < 12) greeting = 'Good morning';
      else if (hour >= 12 && hour < 17) greeting = 'Good afternoon';
      else greeting = 'Good evening';

      document.getElementById('subGreeting').textContent = greeting + '!';
    }

    function loadData() {
      document.getElementById('taskList').innerHTML = '';
      document.getElementById('habitList').innerHTML = '';
      document.getElementById('reflectionList').innerHTML = '';
      tasks.forEach(task => addTaskToUI(task.text, task.category));
      habits.forEach(habit => addHabitToUI(habit.text, habit.streak, habit.lastCompleted));
      reflections.forEach(ref => addReflectionToUI(ref.text, ref.timestamp));
      updateActivityUI();
      updateStatsUI();
    }

    function saveData() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
      localStorage.setItem('habits', JSON.stringify(habits));
      localStorage.setItem('reflections', JSON.stringify(reflections));
      localStorage.setItem('activities', JSON.stringify(activities));
      localStorage.setItem('stats', JSON.stringify(stats));
    }

    function addTask() {
      const taskInput = document.getElementById('taskInput');
      const taskCategory = document.getElementById('taskCategory');
      const taskText = taskInput.value.trim();
      if (taskText !== '') {
        const task = { text: taskText, category: taskCategory.value };
        tasks.push(task);
        addTaskToUI(taskText, taskCategory.value);
        taskInput.value = '';
        saveData();
      }
    }

    function addTaskToUI(taskText, category) {
      const li = document.createElement('li');
      li.textContent = `${taskText} [${category}]`;
      const btn = document.createElement('button');
      btn.textContent = '✔';
      btn.className = 'complete-btn';
      btn.onclick = () => {
        li.remove();
        tasks = tasks.filter(t => t.text !== taskText || t.category !== category);
        stats.taskCount++;
        logActivity(`Completed task: ${taskText} [${category}]`, 'task');
        updateStatsUI();
        saveData();
      };
      li.appendChild(btn);
      document.getElementById('taskList').appendChild(li);
    }

    function addHabit() {
      const habitInput = document.getElementById('habitInput');
      const habitText = habitInput.value.trim();
      if (habitText !== '') {
        const habit = { text: habitText, streak: 0, lastCompleted: null };
        habits.push(habit);
        addHabitToUI(habitText, 0, null);
        habitInput.value = '';
        saveData();
      }
    }

    function addHabitToUI(habitText, streak, lastCompleted) {
      const li = document.createElement('li');
      li.textContent = `${habitText} (Streak: ${streak})`;
      const doneBtn = document.createElement('button');
      doneBtn.textContent = '❌';
      doneBtn.className = 'complete-btn';
      const now = new Date();
      const today = now.toISOString().split('T')[0];
      if (lastCompleted === today) {
        doneBtn.disabled = true;
        doneBtn.textContent = '✔';
      }
      doneBtn.onclick = () => {
        if (doneBtn.disabled) return;
        const habit = habits.find(h => h.text === habitText);
        if (habit && habit.lastCompleted !== today) {
          habit.streak++;
          habit.lastCompleted = today;
          stats.habitCount++;
          li.textContent = `${habitText} (Streak: ${habit.streak})`;
          li.appendChild(doneBtn);
          logActivity(`Habit done: ${habitText} (Streak: ${habit.streak}) at ${now.toLocaleString()}`, 'habit');
          doneBtn.disabled = true;
          doneBtn.textContent = '✔';
          updateStatsUI();
          saveData();
        }
      };
      li.appendChild(doneBtn);
      document.getElementById('habitList').appendChild(li);
    }

    function addReflection() {
      const reflectionInput = document.getElementById('reflectionInput');
      const reflectionText = reflectionInput.value.trim();
      if (reflectionText !== '') {
        const now = new Date();
        const reflection = { text: reflectionText, timestamp: now.toLocaleString() };
        reflections.push(reflection);
        addReflectionToUI(reflectionText, reflection.timestamp);
        stats.reflectionCount++;
        logActivity('Reflection added.', 'reflection');
        reflectionInput.value = '';
        updateStatsUI();
        saveData();
      }
    }

    function addReflectionToUI(reflectionText, timestamp) {
      const li = document.createElement('li');
      li.textContent = `${reflectionText} — ${timestamp}`;
      document.getElementById('reflectionList').appendChild(li);
    }

    function exportReflections() {
      const content = reflections.map(ref => `${ref.text} — ${ref.timestamp}`).join('\n');
      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'reflections.txt';
      a.click();
      URL.revokeObjectURL(url);
    }

    function logActivity(text, type) {
      activities.push({ text, type, timestamp: new Date().toLocaleString() });
      updateActivityUI();
      saveData();
    }

    function updateActivityUI() {
      const activityList = document.getElementById('profileActivity');
      activityList.innerHTML = '';
      activities
        .filter(activity => currentFilter === 'all' || activity.type === currentFilter)
        .forEach(activity => {
          const li = document.createElement('li');
          li.textContent = `${activity.text} — ${activity.timestamp}`;
          activityList.appendChild(li);
        });
    }

    function updateStatsUI() {
      document.getElementById('taskCount').textContent = stats.taskCount;
      document.getElementById('habitCount').textContent = stats.habitCount;
      document.getElementById('reflectionCount').textContent = stats.reflectionCount;
    }

    function filterActivity(type) {
      currentFilter = type;
      document.querySelectorAll('.activity-controls button').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      updateActivityUI();
    }

    function clearActivity() {
      activities = [];
      updateActivityUI();
      saveData();
    }

    function switchSection(sectionId) {
      const sections = document.querySelectorAll('.section');
      sections.forEach(section => section.classList.remove('active'));
      document.getElementById(sectionId).classList.add('active');
    }

    function goBack() {
      switchSection('taskSection');
    }
  </script>
</body>
</html>
